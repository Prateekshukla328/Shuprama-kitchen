<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shuprama - Premium Tiffin Service</title>
  
  <!-- Login Check Script -->
  <script>
    // Check if user is logged in
    function checkLogin() {
      try {
        const user = JSON.parse(localStorage.getItem("user") || "{}");
        if (!user || (!user.phone && !user.email)) {
          showLoginModal();
          return false;
        }
        return true;
      } catch (e) {
        showLoginModal();
        return false;
      }
    }

    // Show login modal on page load if not logged in
    window.addEventListener('load', function() {
      if (!checkLogin()) {
        // User not logged in, modal will show
      } else {
        // User is logged in, populate their data
        populateUserData();
      }
    });
  </script>

  <!-- SEO META TAGS -->
  <meta name="description" content="Shuprama provides affordable, hygienic, and student-friendly tiffin services in Bareilly.">
  <meta name="keywords" content="Tiffin service Bareilly, student food, affordable meals, hygienic tiffin, Shuprama">
  <meta name="author" content="Shuprama">

  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="Shuprama - Fresh Tiffins in Bareilly">
  <meta property="og:description" content="Affordable, hygienic, student-friendly tiffin service in Bareilly.">
  <meta property="og:image" content="https://prateekshukla328.github.io/Shuprama/promo_banner.png">
  <meta property="og:url" content="https://shuprama.store">
  <meta property="og:type" content="website">

  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Shuprama - Fresh Tiffins in Bareilly">
  <meta name="twitter:description" content="Affordable, hygienic, student-friendly tiffin service in Bareilly.">
  <meta name="twitter:image" content="https://prateekshukla328.github.io/Shuprama/promo_banner.png">

  <link rel="manifest" href="/Shuprama/manifest.json">
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/Shuprama/service-worker.js');
    }
  </script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #333;
      line-height: 1.6;
      min-height: 100vh;
    }

    /* Creative Hamburger Menu */
    #hamburger {
      position: fixed;
      top: 20px;
      left: 20px;
      width: 60px;
      height: 60px;
      cursor: pointer;
      z-index: 1001;
      background: linear-gradient(135deg, #ff6b6b, #feca57, #48dbfb);
      background-size: 200% 200%;
      animation: gradientMove 3s ease infinite;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      border: 3px solid rgba(255, 255, 255, 0.3);
    }

    @keyframes gradientMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    #hamburger:hover {
      transform: scale(1.15) rotate(180deg);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
      border-color: rgba(255, 255, 255, 0.6);
    }

    .hamburger-icon {
      position: relative;
      width: 24px;
      height: 18px;
    }

    .hamburger-line {
      position: absolute;
      width: 100%;
      height: 3px;
      background: white;
      border-radius: 2px;
      transition: all 0.3s ease;
    }

    .hamburger-line:nth-child(1) {
      top: 0;
    }

    .hamburger-line:nth-child(2) {
      top: 50%;
      transform: translateY(-50%);
    }

    .hamburger-line:nth-child(3) {
      bottom: 0;
    }

    #hamburger:hover .hamburger-line:nth-child(1) {
      transform: rotate(45deg) translate(6px, 6px);
    }

    #hamburger:hover .hamburger-line:nth-child(2) {
      opacity: 0;
    }

    #hamburger:hover .hamburger-line:nth-child(3) {
      transform: rotate(-45deg) translate(6px, -6px);
    }

    #sidebar {
      height: 100%;
      width: 0;
      position: fixed;
      z-index: 1000;
      top: 0;
      left: 0;
      background: linear-gradient(180deg, #667eea 0%, #764ba2 50%, #ff6b6b 100%);
      overflow-x: hidden;
      transition: 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      padding-top: 100px;
      box-shadow: 4px 0 30px rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(20px);
    }

    #sidebar::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
    }

    #sidebar a, #sidebar .contact-box {
      padding: 20px 30px;
      text-decoration: none;
      font-size: 18px;
      color: white;
      display: block;
      transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      border-left: 4px solid transparent;
      position: relative;
      z-index: 2;
      margin: 5px 15px;
      border-radius: 15px;
      backdrop-filter: blur(10px);
      font-weight: 500;
    }

    #sidebar a::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
      border-radius: 15px;
      opacity: 0;
      transition: all 0.3s ease;
      z-index: -1;
    }

    #sidebar a:hover::before {
      opacity: 1;
    }

    #sidebar a:hover {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1));
      color: #feca57;
      border-left: 4px solid #feca57;
      transform: translateX(10px) scale(1.02);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    }

    .menu-icon {
      display: inline-block;
      width: 24px;
      text-align: center;
      margin-right: 15px;
      font-size: 20px;
    }

    #sidebar .contact-box {
      background: linear-gradient(135deg, #ffeaa7, #fab1a0);
      border-radius: 15px;
      margin: 20px;
      padding: 20px;
      font-size: 16px;
      line-height: 1.8;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    /* Header */
    header {
      background: linear-gradient(135deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3);
      background-size: 400% 400%;
      animation: gradientShift 8s ease infinite;
      color: white;
      padding: 40px 20px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.1);
    }

    header * {
      position: relative;
      z-index: 2;
    }

    header img {
      width: 180px;
      margin: 20px auto;
      display: block;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      transition: transform 0.3s ease;
    }

    header img:hover {
      transform: scale(1.05) rotate(2deg);
    }

    h1 {
      margin: 20px 0;
      font-size: 3.5em;
      font-weight: 700;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      animation: titlePulse 3s ease-in-out infinite;
    }

    @keyframes titlePulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.02); }
    }

    .subtitle {
      font-size: 1.3em;
      margin-top: 10px;
      opacity: 0.9;
      font-weight: 300;
    }

    /* Sections */
    .section {
      padding: 40px;
      margin: 30px auto;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 25px;
      max-width: 900px;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .section:hover {
      transform: translateY(-5px);
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
    }

    .section h2 {
      color: #333;
      font-size: 2.2em;
      margin-bottom: 25px;
      text-align: center;
      position: relative;
      padding-bottom: 15px;
    }

    .section h2::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 4px;
      background: linear-gradient(90deg, #667eea, #764ba2);
      border-radius: 2px;
    }

    /* Custom Form Styles */
    .tiffin-form {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border-radius: 25px;
      padding: 40px;
      margin: 30px auto;
      max-width: 900px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    }

    .tiffin-form h2 {
      color: white;
      text-align: center;
      margin-bottom: 30px;
      font-size: 2.5em;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 25px;
      margin-bottom: 25px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group label {
      margin-bottom: 8px;
      font-weight: 600;
      color: #fff;
      font-size: 1.1em;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      padding: 15px;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      background: rgba(255, 255, 255, 0.9);
      color: #333;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      background: white;
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }

    .form-group textarea {
      resize: vertical;
      min-height: 120px;
    }

    .checkbox-group {
      display: flex;
      align-items: center;
      gap: 12px;
      margin: 20px 0;
      color: white;
    }

    .checkbox-group input[type="checkbox"] {
      width: 20px;
      height: 20px;
      accent-color: #feca57;
    }

    .submit-btn {
      background: linear-gradient(135deg, #feca57, #ff6b6b);
      color: white;
      padding: 18px 50px;
      border: none;
      border-radius: 50px;
      font-size: 1.2em;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: block;
      margin: 30px auto 0;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }

    .submit-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
      background: linear-gradient(135deg, #ff6b6b, #feca57);
    }

    /* Menu Cards */
    .menu-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 25px;
      margin-top: 30px;
    }

    .menu-card {
      background: linear-gradient(135deg, #74b9ff, #0984e3);
      color: white;
      padding: 25px;
      border-radius: 20px;
      text-align: center;
      transition: all 0.3s ease;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }

    .menu-card:hover {
      transform: translateY(-8px) rotate(2deg);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    }

    .menu-card h3 {
      font-size: 1.5em;
      margin-bottom: 15px;
    }

    .price {
      font-size: 2em;
      font-weight: 700;
      color: #feca57;
      margin: 15px 0;
    }

    /* QR Code and WhatsApp */
    .qr-img, .whatsapp-img {
      display: block;
      margin: 30px auto;
      max-width: 280px;
      border-radius: 20px;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
      transition: transform 0.3s ease;
    }

    .qr-img:hover, .whatsapp-img:hover {
      transform: scale(1.05);
    }

    /* Contact Info */
    .contact-info {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 25px;
      margin-top: 30px;
    }

    .contact-card {
      background: linear-gradient(135deg, #fd79a8, #fdcb6e);
      color: white;
      padding: 25px;
      border-radius: 20px;
      text-align: center;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }

    .contact-card h3 {
      margin-bottom: 15px;
      font-size: 1.3em;
    }

    /* Success Message */
    .success-message {
      background: linear-gradient(135deg, #00b894, #00cec9);
      color: white;
      padding: 20px;
      border-radius: 15px;
      margin-bottom: 25px;
      display: none;
      text-align: center;
      font-weight: 600;
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 40px 20px;
      font-size: 18px;
      background: linear-gradient(135deg, #2d3436, #636e72);
      color: #fff;
      margin-top: 50px;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      h1 {
        font-size: 2.5em;
      }
      
      .section, .tiffin-form {
        margin: 20px 15px;
        padding: 25px;
      }
      
      .form-grid {
        grid-template-columns: 1fr;
      }
      
      #hamburger {
        top: 15px;
        left: 15px;
      }
    }

    /* Loading Animation */
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Today's Menu Styles */
    .today-menu {
      background: linear-gradient(135deg, #74b9ff, #0984e3);
      color: white;
      padding: 30px;
      border-radius: 20px;
      margin: 20px 0;
    }

    .menu-day h3 {
      font-size: 1.8em;
      text-align: center;
      margin-bottom: 20px;
      color: #feca57;
    }

    .daily-menu {
      list-style: none;
      padding: 0;
    }

    .daily-menu li {
      background: rgba(255, 255, 255, 0.1);
      margin: 15px 0;
      padding: 15px 20px;
      border-radius: 12px;
      font-size: 1.1em;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .daily-menu li strong {
      color: #feca57;
      font-size: 1.2em;
    }

    .view-full-menu {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      padding: 15px 30px;
      border-radius: 25px;
      text-decoration: none;
      font-weight: 600;
      display: inline-block;
      transition: all 0.3s ease;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    }

    .view-full-menu:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 35px rgba(0, 0, 0, 0.3);
    }

    /* WhatsApp Link Styles */
    .whatsapp-link {
      display: inline-block;
      transition: transform 0.3s ease;
    }

    .whatsapp-link:hover {
      transform: scale(1.1) rotate(5deg);
    }

    /* Cart Styles */
    .cart-icon {
      position: fixed;
      top: 20px;
      right: 20px;
      background: linear-gradient(135deg, #ff6b6b, #feca57);
      color: white;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      cursor: pointer;
      z-index: 1001;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
    }

    .cart-icon:hover {
      transform: scale(1.1);
      box-shadow: 0 12px 35px rgba(0, 0, 0, 0.3);
    }

    .cart-count {
      position: absolute;
      top: -5px;
      right: -5px;
      background: #ff3838;
      color: white;
      border-radius: 50%;
      width: 25px;
      height: 25px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
    }

    .meal-card {
      background: linear-gradient(135deg, #74b9ff, #0984e3);
      color: white;
      padding: 25px;
      border-radius: 20px;
      margin: 15px 0;
      transition: all 0.3s ease;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }

    .meal-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    }

    .meal-card.unavailable {
      background: linear-gradient(135deg, #636e72, #2d3436);
      opacity: 0.6;
    }

    .meal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .meal-time {
      background: rgba(255, 255, 255, 0.2);
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 0.9em;
      font-weight: 600;
    }

    .meal-price {
      font-size: 1.8em;
      font-weight: 700;
      color: #feca57;
    }

    .add-to-cart-btn {
      background: linear-gradient(135deg, #00b894, #00cec9);
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 25px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      width: 100%;
      margin-top: 15px;
    }

    .add-to-cart-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    }

    .add-to-cart-btn:disabled {
      background: #636e72;
      cursor: not-allowed;
      transform: none;
    }

    /* Cart Modal */
    .cart-modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(5px);
    }

    .cart-content {
      background: linear-gradient(135deg, #667eea, #764ba2);
      margin: 3% auto;
      padding: 30px;
      border-radius: 25px;
      width: 95%;
      max-width: 800px;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      color: white;
    }

    .cart-item {
      background: rgba(255, 255, 255, 0.1);
      padding: 20px;
      border-radius: 15px;
      margin: 15px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      backdrop-filter: blur(10px);
    }

    .quantity-controls {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .qty-btn {
      background: #feca57;
      color: #333;
      border: none;
      width: 35px;
      height: 35px;
      border-radius: 50%;
      cursor: pointer;
      font-weight: bold;
      font-size: 18px;
    }

    .cart-total {
      background: rgba(255, 255, 255, 0.2);
      padding: 25px;
      border-radius: 15px;
      margin: 25px 0;
      text-align: center;
      backdrop-filter: blur(10px);
    }

    .payment-options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin: 25px 0;
    }

    .payment-option {
      background: rgba(255, 255, 255, 0.1);
      padding: 20px;
      border-radius: 15px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid transparent;
    }

    .payment-option:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-2px);
    }

    .payment-option.selected {
      border-color: #feca57;
      background: rgba(254, 202, 87, 0.2);
    }

    .checkout-btn {
      background: linear-gradient(135deg, #feca57, #ff6b6b);
      color: white;
      border: none;
      padding: 18px 50px;
      border-radius: 50px;
      font-size: 1.2em;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin-top: 20px;
      transition: all 0.3s ease;
    }

    .checkout-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
    }

    .close-cart {
      position: absolute;
      top: 15px;
      right: 25px;
      color: white;
      font-size: 35px;
      font-weight: bold;
      cursor: pointer;
      line-height: 1;
    }

    .close-cart:hover {
      color: #feca57;
    }

    /* Login Modal Styles */
    .login-modal {
      display: none;
      position: fixed;
      z-index: 3000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(10px);
    }

    .login-content {
      background: linear-gradient(135deg, #667eea, #764ba2);
      margin: 5% auto;
      padding: 40px;
      border-radius: 25px;
      width: 90%;
      max-width: 500px;
      max-height: 85vh;
      overflow-y: auto;
      position: relative;
      color: white;
      text-align: center;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
    }

    .login-form {
      margin-top: 30px;
    }

    .login-input {
      width: 100%;
      padding: 15px;
      margin: 15px 0;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      background: rgba(255, 255, 255, 0.9);
      color: #333;
      transition: all 0.3s ease;
    }

    .login-input:focus {
      outline: none;
      background: white;
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }

    .login-btn {
      background: linear-gradient(135deg, #feca57, #ff6b6b);
      color: white;
      padding: 15px 40px;
      border: none;
      border-radius: 50px;
      font-size: 1.1em;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin-top: 20px;
      transition: all 0.3s ease;
    }

    .login-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .login-tabs {
      display: flex;
      margin-bottom: 30px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      padding: 5px;
    }

    .login-tab {
      flex: 1;
      padding: 12px;
      background: transparent;
      border: none;
      color: white;
      cursor: pointer;
      border-radius: 10px;
      transition: all 0.3s ease;
      font-weight: 600;
    }

    .login-tab.active {
      background: rgba(255, 255, 255, 0.2);
      color: #feca57;
    }

    .user-info {
      position: fixed;
      top: 90px;
      right: 20px;
      background: linear-gradient(135deg, #00b894, #00cec9);
      color: white;
      padding: 15px 20px;
      border-radius: 15px;
      font-size: 14px;
      z-index: 1000;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }


  </style>
</head>
<body>

  <!-- Creative Hamburger Menu -->
  <div id="hamburger" onclick="toggleSidebar()">
    <div class="hamburger-icon">
      <div class="hamburger-line"></div>
      <div class="hamburger-line"></div>
      <div class="hamburger-line"></div>
    </div>
  </div>
  
  <!-- Cart Icon -->
  <div class="cart-icon" onclick="openCart()">
    üõí
    <div class="cart-count" id="cartCount" style="display: none;">0</div>
  </div>
  
  <div id="sidebar">
    <a href="#home">
      <span class="menu-icon">üè†</span>Home
    </a>
    <a href="#menu">
      <span class="menu-icon">üçΩÔ∏è</span>Today's Menu
    </a>
    <a href="#order">
      <span class="menu-icon">üìù</span>Place Order
    </a>
    <a href="https://drive.google.com/file/d/10zu3FGCTuWtg_A8HD1n5n9t8LYKBLgaB/view?usp=drivesdk" target="_blank">
      <span class="menu-icon">üìÑ</span>Full Menu
    </a>
    <a href="javascript:void(0)" onclick="showOrderHistory()">
      <span class="menu-icon">üì¶</span>Order History
    </a>
    <a href="https://wa.me/916387158928" target="_blank">
      <span class="menu-icon">üí¨</span>WhatsApp Order
    </a>
    <a href="#contact">
      <span class="menu-icon">üìû</span>Contact Us
    </a>
    <a href="#payment">
      <span class="menu-icon">üí≥</span>Payment
    </a>
    <a href="javascript:void(0)" onclick="checkAdminAccess()" id="adminPanelLink" style="display: none;">
      <span class="menu-icon">‚öôÔ∏è</span>Admin Panel
    </a>
    <a href="javascript:void(0)" onclick="logout()">
      <span class="menu-icon">üö™</span>Logout
    </a>
    
    <div class="contact-box" style="background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1)); border-radius: 20px; margin: 20px 15px; padding: 25px; color: white; backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.3); box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);">
      <div style="text-align: center; margin-bottom: 20px;">
        <div style="font-size: 2em; margin-bottom: 10px;">üëë</div>
        <strong style="font-size: 1.2em; color: #feca57;">Admin Access</strong>
      </div>
      <div style="background: rgba(254, 202, 87, 0.2); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
        <strong>üîê Admin Login:</strong><br>
        <span style="opacity: 0.9;">User ID: PrateekShuprama890<br>Password: Pradhya677@</span>
      </div>
      <div style="text-align: center;">
        <button onclick="adminQuickLogin()" style="background: linear-gradient(135deg, #feca57, #ff6b6b); color: white; border: none; padding: 12px 25px; border-radius: 20px; cursor: pointer; font-weight: 600; width: 100%;">
          üëë Quick Admin Login
        </button>
      </div>
    </div>
    
    <div class="contact-box" style="background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1)); border-radius: 20px; margin: 20px 15px; padding: 25px; color: white; backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.3); box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);">
      <div style="text-align: center; margin-bottom: 20px;">
        <div style="font-size: 2em; margin-bottom: 10px;">üçõ</div>
        <strong style="font-size: 1.2em; color: #feca57;">Quick Contact</strong>
      </div>
      <div style="margin: 15px 0;">
        <strong>üìç Address:</strong><br>
        <span style="opacity: 0.9;">Gully No.-7, Nakatiya<br>Bareilly, UP - 243123</span>
      </div>
      <div style="margin: 15px 0;">
        <strong>üìû Phone:</strong><br>
        <span style="opacity: 0.9;">9149153015<br>9198200758</span>
      </div>
      <div style="margin: 15px 0;">
        <strong>üí¨ WhatsApp:</strong><br>
        <span style="opacity: 0.9;">6387158928</span>
      </div>
      <div style="text-align: center; margin-top: 20px;">
        <div style="background: rgba(254, 202, 87, 0.2); padding: 10px; border-radius: 10px; font-size: 0.9em;">
          <strong>‚è∞ Available:</strong><br>
          9:00 AM - 8:00 PM
        </div>
      </div>
    </div>
  </div>

  <!-- Header -->
  <header id="home">
    <img src="https://i.ibb.co/NgzxL55T/logo-txt.png" alt="Shuprama Logo">
    <h1>üçõ SHUPRAMA</h1>
    <p class="subtitle">Fresh ‚Ä¢ Hygienic ‚Ä¢ Affordable Tiffin Service in Bareilly</p>
    <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 15px; margin-top: 20px; backdrop-filter: blur(10px);">
      <p style="margin: 0; font-size: 1.1em;">üçõ <strong>Fresh & Hygienic</strong> - Order your favorite tiffin now!</p>
    </div>
  </header>

  <!-- Today's Menu Section -->
  <div class="section" id="menu">
    <h2>üçΩÔ∏è Available Meals</h2>
    <div id="mealsContainer">
      <!-- Meals will be loaded here -->
    </div>
    
    <div style="text-align: center; margin-top: 30px;">
      <a href="https://drive.google.com/file/d/10zu3FGCTuWtg_A8HD1n5n9t8LYKBLgaB/view?usp=drivesdk" target="_blank" class="view-full-menu">
        üìÑ View Complete Weekly Menu
      </a>
    </div>
  </div>

  <!-- Custom Order Form -->
  <div class="tiffin-form" id="order">
    <h2>üìù Place Your Tiffin Order</h2>
    
    <div class="success-message" id="successMessage">
      ‚úÖ Thank you! Your tiffin order has been successfully placed. We'll contact you soon!
    </div>
    
    <form id="tiffinOrderForm">
      <div class="form-grid">
        <div class="form-group">
          <label for="customerName">üë§ Full Name *</label>
          <input type="text" id="customerName" name="customerName" required>
        </div>
        
        <div class="form-group">
          <label for="phone">üì± Phone Number *</label>
          <input type="tel" id="phone" name="phone" required>
        </div>
        
        <div class="form-group">
          <label for="email">üìß Email Address</label>
          <input type="email" id="email" name="email">
        </div>
        
        <div class="form-group">
          <label for="address">üè† Delivery Address *</label>
          <input type="text" id="address" name="address" required>
        </div>
        
        <div class="form-group">
          <label for="mealPlan">üçΩÔ∏è Select Meal Plan *</label>
          <select id="mealPlan" name="mealPlan" required>
            <option value="">Choose your plan</option>
            <option value="regular">Regular Thali - ‚Çπ80</option>
            <option value="special">Special Thali - ‚Çπ120</option>
            <option value="diet">Diet Thali - ‚Çπ100</option>
            <option value="combo">Combo Meal - ‚Çπ150</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="duration">üìÖ Subscription Duration</label>
          <select id="duration" name="duration">
            <option value="">Select duration</option>
            <option value="daily">Daily</option>
            <option value="weekly">Weekly</option>
            <option value="monthly">Monthly</option>
            <option value="trial">3-Day Trial</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="deliveryTime">‚è∞ Preferred Delivery Time</label>
          <select id="deliveryTime" name="deliveryTime">
            <option value="">Select time</option>
            <option value="12:00-12:30">12:00 PM - 12:30 PM</option>
            <option value="12:30-1:00">12:30 PM - 1:00 PM</option>
            <option value="1:00-1:30">1:00 PM - 1:30 PM</option>
            <option value="1:30-2:00">1:30 PM - 2:00 PM</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="startDate">üìÜ Start Date</label>
          <input type="date" id="startDate" name="startDate">
        </div>
      </div>
      
      <div class="form-group">
        <label for="specialRequests">üìù Special Requests / Dietary Preferences</label>
        <textarea id="specialRequests" name="specialRequests" placeholder="Any special dietary requirements, allergies, or preferences..."></textarea>
      </div>

      <div class="checkbox-group">
        <input type="checkbox" id="whatsappUpdates" name="whatsappUpdates">
        <label for="whatsappUpdates">üì± Send order updates via WhatsApp</label>
      </div>

      <div class="checkbox-group">
        <input type="checkbox" id="terms" name="terms" required>
        <label for="terms">‚úÖ I agree to the terms and conditions *</label>
      </div>

      <button type="submit" class="submit-btn">
        <span id="submitText">üçõ Place My Tiffin Order</span>
        <span id="submitLoading" style="display: none;">
          <span class="loading"></span> Processing...
        </span>
      </button>
    </form>
  </div>

  <!-- Payment Section -->
  <div class="section" id="payment">
    <h2>üí≥ Payment QR Code</h2>
    <div style="text-align: center;">
      <a href="upi://pay?pa=prateekshukla388@naviaxis&pn=Shuprama%20Kitchen" target="_blank">
        <img src="https://i.ibb.co/B5XzFwzH/payment-qr-txt-1.png" alt="Payment QR Code" class="qr-img">
      </a>
      <p style="margin-top: 15px; font-weight: 600;">üì± Tap QR Code to Pay via UPI</p>
      <p style="color: #666; margin-top: 10px;">UPI ID: prateekshukla388@naviaxis</p>
    </div>
  </div>

  <!-- WhatsApp Order Section -->
  <div class="section" id="whatsapp-order">
    <h2>üì± Order by WhatsApp</h2>
    <div style="text-align: center;">
      <a href="https://wa.me/916387158928" target="_blank" class="whatsapp-link">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp" class="whatsapp-img">
      </a>
      <p style="margin-top: 15px; font-weight: 600;">üí¨ Click to Order via WhatsApp</p>
      <p style="color: #666; margin-top: 10px;">Quick and easy ordering through WhatsApp</p>
    </div>
  </div>

  <!-- Contact Section -->
  <div class="section" id="contact">
    <h2>üìû Contact Information</h2>
    <div class="contact-info">
      <div class="contact-card">
        <h3>üì± Phone Numbers</h3>
        <p>9149153015</p>
        <p>9198200758</p>
        <p>Available 9 AM - 8 PM</p>
      </div>
      <div class="contact-card">
        <h3>üìç Address</h3>
        <p>Gully No.-7, Nakatiya</p>
        <p>Bareilly, UP - 243123</p>
        <p>Free delivery in city limits</p>
      </div>
      <div class="contact-card">
        <h3>üí¨ WhatsApp</h3>
        <p>6387158928</p>
        <p>Quick order & support</p>
      </div>
    </div>
  </div>

  <!-- About Section -->
  <div class="section" id="about">
    <h2>‚ÑπÔ∏è About Shuprama</h2>
    <p style="font-size: 1.1em; line-height: 1.8; text-align: center;">
      üçõ <strong>Shuprama</strong> is Bareilly's most trusted tiffin service, dedicated to providing fresh, hygienic, and affordable meals to students and working professionals. 
      <br><br>
      ‚ú® We believe in home-style cooking with the highest quality ingredients, ensuring every meal is nutritious and delicious. Our commitment to hygiene and timely delivery has made us the preferred choice for hundreds of satisfied customers.
      <br><br>
      üéØ <strong>Our Mission:</strong> To provide healthy, affordable, and tasty meals that feel like home-cooked food, delivered right to your doorstep with love and care.
    </p>
  </div>



  <!-- Thank You Section -->
  <div class="section" style="text-align: center; background: linear-gradient(135deg, #00b894, #00cec9);">
    <a href="thankyou.html" style="background: rgba(255,255,255,0.2); color: white; padding: 20px 40px; border-radius: 50px; text-decoration: none; font-weight: bold; display: inline-block; margin-bottom: 15px; backdrop-filter: blur(10px); box-shadow: 0 8px 25px rgba(0,0,0,0.2); transition: all 0.3s ease;" onmouseover="this.style.background='rgba(255,255,255,0.3)'; this.style.transform='translateY(-2px)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'; this.style.transform='translateY(0)'">
      üíù Thank You for Choosing Shuprama
    </a>
    <p style="color: white; font-size: 1.1em; margin-top: 10px;">Your satisfaction is our priority!</p>
  </div>

  <!-- Cart Modal -->
  <div id="cartModal" class="cart-modal">
    <div class="cart-content">
      <span class="close-cart" onclick="closeCart()">&times;</span>
      <h2 style="text-align: center; margin-bottom: 30px; font-size: 2.2em;">üõí Your Cart</h2>
      
      <div id="cartItems">
        <!-- Cart items will be loaded here -->
      </div>
      
      <div class="cart-total" id="cartTotal" style="display: none;">
        <h3 style="margin-bottom: 15px;">Order Summary</h3>
        <div style="display: flex; justify-content: space-between; margin: 10px 0;">
          <span>Subtotal:</span>
          <span id="subtotal">‚Çπ0</span>
        </div>
        <div style="display: flex; justify-content: space-between; margin: 10px 0;">
          <span>Delivery:</span>
          <span>Free</span>
        </div>
        <hr style="margin: 15px 0; border: 1px solid rgba(255,255,255,0.3);">
        <div style="display: flex; justify-content: space-between; font-size: 1.3em; font-weight: bold;">
          <span>Total:</span>
          <span id="totalAmount">‚Çπ0</span>
        </div>
      </div>
      
      <div id="paymentSection" style="display: none;">
        <h3 style="margin: 25px 0 15px 0; text-align: center;">üí≥ Payment Method</h3>
        <div class="payment-options">
          <div class="payment-option" onclick="selectPayment('online')" id="onlinePayment">
            <h4>üí≥ Online Payment</h4>
            <p>UPI / Card / Net Banking</p>
          </div>
          <div class="payment-option" onclick="selectPayment('cod')" id="codPayment">
            <h4>üí∞ Cash on Delivery</h4>
            <p>Pay when you receive</p>
          </div>
        </div>
        
        <div id="deliveryInfo" style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin: 20px 0;">
          <h4 style="margin-bottom: 15px;">üìç Delivery Information</h4>
          <input type="text" id="cartCustomerName" placeholder="Your Name" style="width: 100%; padding: 12px; margin: 8px 0; border: none; border-radius: 8px; background: rgba(255,255,255,0.9); color: #333;">
          <input type="tel" id="cartPhone" placeholder="Phone Number" style="width: 100%; padding: 12px; margin: 8px 0; border: none; border-radius: 8px; background: rgba(255,255,255,0.9); color: #333;">
          <textarea id="cartAddress" placeholder="Delivery Address" style="width: 100%; padding: 12px; margin: 8px 0; border: none; border-radius: 8px; background: rgba(255,255,255,0.9); color: #333; min-height: 80px; resize: vertical;"></textarea>
        </div>
        
        <button class="checkout-btn" onclick="processOrder()" id="checkoutBtn">
          üçõ Place Order
        </button>
      </div>
    </div>
  </div>

  <!-- Order History Modal -->
  <div id="orderHistoryModal" style="display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); backdrop-filter: blur(5px);">
    <div style="background: linear-gradient(135deg, #667eea, #764ba2); margin: 5% auto; padding: 30px; border-radius: 25px; width: 90%; max-width: 800px; max-height: 80vh; overflow-y: auto; position: relative;">
      <span onclick="closeOrderHistory()" style="color: white; float: right; font-size: 35px; font-weight: bold; cursor: pointer; line-height: 1;">&times;</span>
      <h2 style="color: white; text-align: center; margin-bottom: 30px; font-size: 2.2em;">üì¶ Your Order History</h2>
      <div id="orderHistoryContent">
        <p style="color: white; text-align: center; font-size: 1.2em;">Loading your orders...</p>
      </div>
    </div>
  </div>

  <!-- Login Modal -->
  <div id="loginModal" class="login-modal">
    <div class="login-content">
      <h2 style="margin-bottom: 10px; font-size: 2.2em;">üçõ Welcome to Shuprama</h2>
      <p style="opacity: 0.9; margin-bottom: 30px;">Please login to continue ordering delicious tiffins</p>
      
      <div class="login-tabs">
        <button class="login-tab active" onclick="switchTab('login')">Login</button>
        <button class="login-tab" onclick="switchTab('signup')">Sign Up</button>
      </div>
      
      <!-- Login Form -->
      <div id="loginForm" class="login-form">
        <input type="tel" id="loginPhone" class="login-input" placeholder="üì± Enter your phone number" required>
        <input type="password" id="loginPassword" class="login-input" placeholder="üîí Enter your password" required>
        
        <div style="display: flex; justify-content: space-between; align-items: center; margin: 15px 0;">
          <label style="display: flex; align-items: center; font-size: 0.9em; cursor: pointer;">
            <input type="checkbox" id="showPassword" onchange="togglePassword()" style="margin-right: 8px;">
            üëÅÔ∏è Show Password
          </label>
          <button type="button" onclick="forgotPassword()" style="background: none; border: none; color: #feca57; cursor: pointer; font-size: 0.9em; text-decoration: underline;">
            üîë Forgot Password?
          </button>
        </div>
        
        <button onclick="handleLogin()" class="login-btn">
          <span id="loginBtnText">üöÄ Login & Start Ordering</span>
          <span id="loginBtnLoading" style="display: none;"><span class="loading"></span> Logging in...</span>
        </button>
        
        <div style="margin-top: 20px;">
          <button type="button" onclick="showUserData()" style="background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.3); padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 0.9em;">
            üìä My Profile
          </button>
        </div>
        
        <p style="margin-top: 20px; font-size: 0.9em; opacity: 0.8;">
          Don't have an account? Click "Sign Up" above
        </p>
      </div>
      
      <!-- Signup Form -->
      <div id="signupForm" class="login-form" style="display: none;">
        <input type="text" id="signupName" class="login-input" placeholder="üë§ Full Name" required>
        <input type="tel" id="signupPhone" class="login-input" placeholder="üì± Phone Number" required>
        <input type="email" id="signupEmail" class="login-input" placeholder="üìß Email Address" required>
        <input type="password" id="signupPassword" class="login-input" placeholder="üîí Create Password" required>
        <input type="text" id="signupAddress" class="login-input" placeholder="üè† Your Address" required>
        <button onclick="handleSignup()" class="login-btn">
          <span id="signupBtnText">‚ú® Create Account & Order</span>
          <span id="signupBtnLoading" style="display: none;"><span class="loading"></span> Creating account...</span>
        </button>
        <p style="margin-top: 20px; font-size: 0.9em; opacity: 0.8;">
          Already have an account? Click "Login" above
        </p>
      </div>
    </div>
  </div>

  <!-- User Info Display -->
  <div id="userInfo" class="user-info" style="display: none;">
    <div style="font-weight: 600; margin-bottom: 5px;">üëã Welcome!</div>
    <div id="userDisplayName">User</div>
  </div>

  <!-- Admin Panel Modal -->
  <div id="adminModal" style="display: none; position: fixed; z-index: 3000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); backdrop-filter: blur(10px);">
    <div style="background: linear-gradient(135deg, #667eea, #764ba2); margin: 2% auto; padding: 30px; border-radius: 25px; width: 95%; max-width: 1000px; max-height: 90vh; overflow-y: auto; position: relative; color: white;">
      <span onclick="closeAdminPanel()" style="color: white; float: right; font-size: 35px; font-weight: bold; cursor: pointer; line-height: 1;">&times;</span>
      <h2 style="text-align: center; margin-bottom: 30px; font-size: 2.2em;">‚öôÔ∏è Admin Panel</h2>
      
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px;">
        
        <!-- User Management -->
        <div style="background: rgba(255,255,255,0.1); padding: 25px; border-radius: 15px; backdrop-filter: blur(10px);">
          <h3 style="margin-bottom: 20px; color: #feca57;">üë• User Management</h3>
          <button onclick="showAllUsersDetailed()" style="background: linear-gradient(135deg, #00b894, #00cec9); color: white; border: none; padding: 12px 20px; border-radius: 20px; cursor: pointer; margin: 5px; width: 100%; font-weight: 600;">
            üìä View All Users
          </button>
          <button onclick="exportUserData()" style="background: linear-gradient(135deg, #74b9ff, #0984e3); color: white; border: none; padding: 12px 20px; border-radius: 20px; cursor: pointer; margin: 5px; width: 100%; font-weight: 600;">
            üì• Export User Data
          </button>
          <button onclick="clearAllUsers()" style="background: linear-gradient(135deg, #ff6b6b, #e84393); color: white; border: none; padding: 12px 20px; border-radius: 20px; cursor: pointer; margin: 5px; width: 100%; font-weight: 600;">
            üóëÔ∏è Clear All Users
          </button>
        </div>

        <!-- Order Management -->
        <div style="background: rgba(255,255,255,0.1); padding: 25px; border-radius: 15px; backdrop-filter: blur(10px);">
          <h3 style="margin-bottom: 20px; color: #feca57;">üì¶ Order Management</h3>
          <button onclick="showAllOrders()" style="background: linear-gradient(135deg, #00b894, #00cec9); color: white; border: none; padding: 12px 20px; border-radius: 20px; cursor: pointer; margin: 5px; width: 100%; font-weight: 600;">
            üìã View All Orders
          </button>
          <button onclick="exportOrderData()" style="background: linear-gradient(135deg, #74b9ff, #0984e3); color: white; border: none; padding: 12px 20px; border-radius: 20px; cursor: pointer; margin: 5px; width: 100%; font-weight: 600;">
            üì• Export Orders
          </button>
          <button onclick="clearAllOrders()" style="background: linear-gradient(135deg, #ff6b6b, #e84393); color: white; border: none; padding: 12px 20px; border-radius: 20px; cursor: pointer; margin: 5px; width: 100%; font-weight: 600;">
            üóëÔ∏è Clear All Orders
          </button>
        </div>

        <!-- System Stats -->
        <div style="background: rgba(255,255,255,0.1); padding: 25px; border-radius: 15px; backdrop-filter: blur(10px);">
          <h3 style="margin-bottom: 20px; color: #feca57;">üìä System Statistics</h3>
          <div id="systemStats">
            <p>Loading statistics...</p>
          </div>
        </div>

        <!-- Admin Management -->
        <div style="background: rgba(255,255,255,0.1); padding: 25px; border-radius: 15px; backdrop-filter: blur(10px);">
          <h3 style="margin-bottom: 20px; color: #feca57;">üëë Admin Management</h3>
          <button onclick="addNewAdmin()" style="background: linear-gradient(135deg, #00b894, #00cec9); color: white; border: none; padding: 12px 20px; border-radius: 20px; cursor: pointer; margin: 5px; width: 100%; font-weight: 600;">
            ‚ûï Add New Admin
          </button>
          <button onclick="removeAdmin()" style="background: linear-gradient(135deg, #ff6b6b, #e84393); color: white; border: none; padding: 12px 20px; border-radius: 20px; cursor: pointer; margin: 5px; width: 100%; font-weight: 600;">
            ‚ûñ Remove Admin
          </button>
          <button onclick="changeAdminPassword()" style="background: linear-gradient(135deg, #fdcb6e, #e17055); color: white; border: none; padding: 12px 20px; border-radius: 20px; cursor: pointer; margin: 5px; width: 100%; font-weight: 600;">
            üîë Change Admin Password
          </button>
          <button onclick="viewAllAdmins()" style="background: linear-gradient(135deg, #74b9ff, #0984e3); color: white; border: none; padding: 12px 20px; border-radius: 20px; cursor: pointer; margin: 5px; width: 100%; font-weight: 600;">
            üë• View All Admins
          </button>
        </div>

        <!-- Quick Actions -->
        <div style="background: rgba(255,255,255,0.1); padding: 25px; border-radius: 15px; backdrop-filter: blur(10px);">
          <h3 style="margin-bottom: 20px; color: #feca57;">‚ö° Quick Actions</h3>
          <button onclick="createTestUser()" style="background: linear-gradient(135deg, #fdcb6e, #e17055); color: white; border: none; padding: 12px 20px; border-radius: 20px; cursor: pointer; margin: 5px; width: 100%; font-weight: 600;">
            üë§ Create Test User
          </button>
          <button onclick="resetSystem()" style="background: linear-gradient(135deg, #ff6b6b, #e84393); color: white; border: none; padding: 12px 20px; border-radius: 20px; cursor: pointer; margin: 5px; width: 100%; font-weight: 600;">
            üîÑ Reset System
          </button>
          <button onclick="backupData()" style="background: linear-gradient(135deg, #a29bfe, #6c5ce7); color: white; border: none; padding: 12px 20px; border-radius: 20px; cursor: pointer; margin: 5px; width: 100%; font-weight: 600;">
            üíæ Backup Data
          </button>
        </div>

      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <p>&copy; 2024 All rights reserved by Shuprama India</p>
    <p>üçõ Fresh Food ‚Ä¢ üöö Fast Delivery ‚Ä¢ üíù Made with Love</p>
  </footer>

  <script>
    // Sidebar functionality
    function toggleSidebar() {
      const sidebar = document.getElementById("sidebar");
      if (sidebar.style.width === "250px") {
        sidebar.style.width = "0";
      } else {
        sidebar.style.width = "250px";
      }
    }

    // Close sidebar when clicking outside
    document.addEventListener('click', function(event) {
      const sidebar = document.getElementById("sidebar");
      const hamburger = document.getElementById("hamburger");
      
      if (!sidebar.contains(event.target) && !hamburger.contains(event.target)) {
        sidebar.style.width = "0";
      }
    });

    // Login/Logout System
    function showLoginModal() {
      document.getElementById('loginModal').style.display = 'block';
    }

    function hideLoginModal() {
      document.getElementById('loginModal').style.display = 'none';
    }

    function switchTab(tab) {
      const loginTab = document.querySelector('.login-tab:first-child');
      const signupTab = document.querySelector('.login-tab:last-child');
      const loginForm = document.getElementById('loginForm');
      const signupForm = document.getElementById('signupForm');

      if (tab === 'login') {
        loginTab.classList.add('active');
        signupTab.classList.remove('active');
        loginForm.style.display = 'block';
        signupForm.style.display = 'none';
      } else {
        signupTab.classList.add('active');
        loginTab.classList.remove('active');
        signupForm.style.display = 'block';
        loginForm.style.display = 'none';
      }
    }

    function handleLogin() {
      const phone = document.getElementById('loginPhone').value.trim();
      const password = document.getElementById('loginPassword').value.trim();

      if (!phone || !password) {
        alert('Please fill in all fields!');
        return;
      }

      // Show loading
      document.getElementById('loginBtnText').style.display = 'none';
      document.getElementById('loginBtnLoading').style.display = 'inline';

      // Simulate login process
      setTimeout(() => {
        // Get stored users
        const users = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
        const user = users.find(u => u.phone === phone && u.password === password);

        if (user) {
          // Login successful
          localStorage.setItem('user', JSON.stringify({
            name: user.name,
            userId: user.userId,
            phone: user.phone,
            email: user.email,
            address: user.address,
            isAdmin: user.isAdmin || false,
            loginTime: new Date().toISOString()
          }));

          hideLoginModal();
          showUserInfo();
          populateUserData();
          
          const welcomeMsg = user.isAdmin ? 
            `üéâ Welcome back, ${user.name}!\nüëë Admin access granted!\nYou can now manage the system and place orders!` :
            `üéâ Welcome back, ${user.name}!\nYou're now logged in and ready to order!`;
          
          alert(welcomeMsg);
        } else {
          alert('‚ùå Invalid phone number or password!\nPlease check your credentials or sign up if you\'re new.');
        }

        // Reset button
        document.getElementById('loginBtnText').style.display = 'inline';
        document.getElementById('loginBtnLoading').style.display = 'none';
      }, 1500);
    }

    function handleSignup() {
      const name = document.getElementById('signupName').value.trim();
      const phone = document.getElementById('signupPhone').value.trim();
      const email = document.getElementById('signupEmail').value.trim();
      const password = document.getElementById('signupPassword').value.trim();
      const address = document.getElementById('signupAddress').value.trim();

      if (!name || !phone || !email || !password || !address) {
        alert('Please fill in all fields!');
        return;
      }

      // Validate phone number
      if (phone.length < 10) {
        alert('Please enter a valid phone number!');
        return;
      }

      // Validate email
      if (!email.includes('@')) {
        alert('Please enter a valid email address!');
        return;
      }

      // Show loading
      document.getElementById('signupBtnText').style.display = 'none';
      document.getElementById('signupBtnLoading').style.display = 'inline';

      // Simulate signup process
      setTimeout(() => {
        // Get existing users
        const users = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
        
        // Check if user already exists
        if (users.find(u => u.phone === phone)) {
          alert('‚ùå An account with this phone number already exists!\nPlease login instead.');
          document.getElementById('signupBtnText').style.display = 'inline';
          document.getElementById('signupBtnLoading').style.display = 'none';
          return;
        }

        // Create new user
        const newUser = {
          name,
          userId: phone, // Use phone as userId for regular users
          phone,
          email,
          password,
          address,
          signupDate: new Date().toISOString(),
          isAdmin: false
        };

        users.push(newUser);
        localStorage.setItem('registeredUsers', JSON.stringify(users));

        // Auto login the new user
        localStorage.setItem('user', JSON.stringify({
          name,
          userId: phone,
          phone,
          email,
          address,
          isAdmin: false,
          loginTime: new Date().toISOString()
        }));

        hideLoginModal();
        showUserInfo();
        populateUserData();
        
        alert(`üéâ Welcome to Shuprama, ${name}!\nYour account has been created successfully!\nYou're now logged in and ready to order!`);

        // Reset form
        document.getElementById('signupForm').reset();
        document.getElementById('signupBtnText').style.display = 'inline';
        document.getElementById('signupBtnLoading').style.display = 'none';
      }, 2000);
    }

    function showUserInfo() {
      const user = JSON.parse(localStorage.getItem('user') || '{}');
      if (user.name) {
        document.getElementById('userDisplayName').textContent = user.name;
        document.getElementById('userInfo').style.display = 'block';
        
        // Show admin panel link only for admin
        if (user.isAdmin || user.userId === ADMIN_CREDENTIALS.userId) {
          document.getElementById('adminPanelLink').style.display = 'block';
        } else {
          document.getElementById('adminPanelLink').style.display = 'none';
        }
      }
    }

    function populateUserData() {
      const user = JSON.parse(localStorage.getItem('user') || '{}');
      if (user) {
        // Populate form fields
        if (user.phone) document.getElementById('phone').value = user.phone;
        if (user.email) document.getElementById('email').value = user.email;
        if (user.name) document.getElementById('customerName').value = user.name;
        if (user.address) document.getElementById('address').value = user.address;
        
        // Populate cart form fields
        if (user.name) document.getElementById('cartCustomerName').value = user.name;
        if (user.phone) document.getElementById('cartPhone').value = user.phone;
        if (user.address) document.getElementById('cartAddress').value = user.address;
      }
    }

    // Logout functionality
    function logout() {
      if (confirm("Are you sure you want to logout?")) {
        localStorage.removeItem("user");
        document.getElementById('userInfo').style.display = 'none';
        document.getElementById('adminPanelLink').style.display = 'none';
        
        // Clear form data
        document.getElementById('customerName').value = '';
        document.getElementById('phone').value = '';
        document.getElementById('email').value = '';
        document.getElementById('address').value = '';
        document.getElementById('cartCustomerName').value = '';
        document.getElementById('cartPhone').value = '';
        document.getElementById('cartAddress').value = '';
        
        // Clear cart
        cart = [];
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCartCount();
        
        alert("You have been logged out successfully!");
        showLoginModal();
      }
    }

    // Google Sheets Integration
    const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbz9BDeJVFmzb5ZwcFn5azya8WQDg5wBRASybxeAx2dm0gnGREtX3FJRj5KrRbozfAhdJQ/exec';
    
    // Form submission
    document.getElementById('tiffinOrderForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      // Show loading state
      document.getElementById('submitText').style.display = 'none';
      document.getElementById('submitLoading').style.display = 'inline';
      
      // Get form data
      const formData = new FormData(this);
      const orderData = {
        timestamp: new Date().toLocaleString('en-IN'),
        orderId: 'TIF' + Date.now(),
        customerName: formData.get('customerName'),
        phone: formData.get('phone'),
        email: formData.get('email') || 'Not provided',
        address: formData.get('address'),
        mealPlan: formData.get('mealPlan'),
        duration: formData.get('duration') || 'Not specified',
        deliveryTime: formData.get('deliveryTime') || 'Not specified',
        startDate: formData.get('startDate') || 'Not specified',
        specialRequests: formData.get('specialRequests') || 'None',
        whatsappUpdates: formData.get('whatsappUpdates') ? 'Yes' : 'No',
        status: 'New Order'
      };
      
      console.log('Sending order data:', orderData);
      
      // Send to Google Sheets
      fetch(GOOGLE_SCRIPT_URL, {
        method: 'POST',
        headers: {
          'Content-Type': 'text/plain',
        },
        body: JSON.stringify(orderData)
      })
      .then(response => {
        console.log('Order sent to Google Sheets successfully');
        
        // Save order to localStorage for customer history
        saveOrderToHistory(orderData);
        
        // Show success message with order ID
        document.getElementById('successMessage').innerHTML = `
          ‚úÖ Order placed successfully!<br>
          <strong>Order ID: ${orderData.orderId}</strong><br>
          We'll contact you soon at ${orderData.phone}
        `;
        document.getElementById('successMessage').style.display = 'block';
        
        // Reset form
        this.reset();
        
        // Reset button state
        document.getElementById('submitText').style.display = 'inline';
        document.getElementById('submitLoading').style.display = 'none';
        
        // Scroll to success message
        document.getElementById('successMessage').scrollIntoView({ 
          behavior: 'smooth' 
        });
        
        // Hide success message after 8 seconds
        setTimeout(() => {
          document.getElementById('successMessage').style.display = 'none';
        }, 8000);
        
      })
      .catch(error => {
        console.error('Error:', error);
        
        // Still save locally and show success (fallback)
        saveOrderToHistory(orderData);
        
        document.getElementById('successMessage').innerHTML = `
          ‚úÖ Order received!<br>
          <strong>Order ID: ${orderData.orderId}</strong><br>
          We'll contact you soon!
        `;
        document.getElementById('successMessage').style.display = 'block';
        
        // Reset form and button
        this.reset();
        document.getElementById('submitText').style.display = 'inline';
        document.getElementById('submitLoading').style.display = 'none';
        
        setTimeout(() => {
          document.getElementById('successMessage').style.display = 'none';
        }, 8000);
      });
    });

    // Save order to customer's local history
    function saveOrderToHistory(orderData) {
      let orderHistory = JSON.parse(localStorage.getItem('orderHistory') || '[]');
      orderHistory.unshift(orderData); // Add to beginning
      
      // Keep only last 10 orders
      if (orderHistory.length > 10) {
        orderHistory = orderHistory.slice(0, 10);
      }
      
      localStorage.setItem('orderHistory', JSON.stringify(orderHistory));
    }

    // Smooth scrolling for navigation
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
          // Close sidebar on mobile
          document.getElementById("sidebar").style.width = "0";
        }
      });
    });

    // Form validation enhancements
    const requiredInputs = document.querySelectorAll('input[required], select[required]');
    requiredInputs.forEach(input => {
      input.addEventListener('blur', function() {
        if (!this.value.trim()) {
          this.style.borderColor = '#ff6b6b';
          this.style.boxShadow = '0 0 10px rgba(255, 107, 107, 0.3)';
        } else {
          this.style.borderColor = '#00b894';
          this.style.boxShadow = '0 0 10px rgba(0, 184, 148, 0.3)';
        }
      });
    });

    // Phone number validation
    document.getElementById('phone').addEventListener('input', function() {
      this.value = this.value.replace(/[^0-9+\-\s]/g, '');
    });

    // Set minimum date to today
    document.getElementById('startDate').min = new Date().toISOString().split('T')[0];

    // Initialize user session and create admin if not exists
    window.addEventListener('load', function() {
      // Create admin account if it doesn't exist
      const users = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
      const adminExists = users.find(u => u.userId === ADMIN_CREDENTIALS.userId);
      
      if (!adminExists) {
        const adminUser = {
          name: "Prateek Shuprama",
          userId: ADMIN_CREDENTIALS.userId,
          phone: "9149153015",
          email: "admin@shuprama.com",
          password: ADMIN_CREDENTIALS.password,
          address: "Shuprama Kitchen, Bareilly",
          signupDate: new Date().toISOString(),
          role: "admin",
          isAdmin: true
        };
        users.push(adminUser);
        localStorage.setItem('registeredUsers', JSON.stringify(users));
      }
      
      const user = JSON.parse(localStorage.getItem("user") || "{}");
      if (user && user.name) {
        showUserInfo();
        populateUserData();
      }
    });

    // Today's Menu Functionality
    const menu = {
      Monday: {
        Breakfast: "Poha + Chai + 4 Toast ‚Çπ40",
        Lunch: "Mix veg pulao + dahi + salad ‚Çπ50",
        Dinner: "Rajma/Chhole + 4 Roti + Chawal + Raita ‚Çπ50"
      },
      Tuesday: {
        Breakfast: "Halwa + Chana + Chai ‚Çπ40",
        Lunch: "Chane ki ghugni + 2 Paratha + Achar ‚Çπ50",
        Dinner: "Arhar Daal + 4 Roti + Chawal + Sabji ‚Çπ50"
      },
      Wednesday: {
        Breakfast: "Daliya + Fried Aloo + Chai ‚Çπ40",
        Lunch: "Vegetable khichdi + Papad ‚Çπ50",
        Dinner: "Soyabean + 4 Roti + Chawal + Raita ‚Çπ50"
      },
      Thursday: {
        Breakfast: "Roti/Paratha + Sabji + Chai ‚Çπ40",
        Lunch: "Soya chunks curry + 4 Roti + Salad ‚Çπ50",
        Dinner: "Moong/Masoor + 4 Roti + Chawal + Sabji ‚Çπ50"
      },
      Friday: {
        Breakfast: "Dosa + Chai + Tomato Sauce ‚Çπ40",
        Lunch: "Besan ki Kadhi + 4 Roti + Chawal ‚Çπ50",
        Dinner: "Malka Daal + 4 Roti + Chawal + Sabji ‚Çπ50"
      },
      Saturday: {
        Breakfast: "Chhole + Kulche + Chai ‚Çπ40",
        Lunch: "Lauki Chana Daal + 4 Roti + Achar ‚Çπ50",
        Dinner: "Aloo Tamatar + 4 Roti + Chawal + Raita ‚Çπ50"
      },
      Sunday: {
        Breakfast: "Kachauri + Chai ‚Çπ40",
        Lunch: "Veg pulao + dahi + Salad ‚Çπ50",
        Dinner: "Paneer + 4 Roti + Chawal + Raita ‚Çπ60"
      }
    };

    // Display today's menu
    function displayTodaysMenu() {
      const today = new Date().toLocaleString('en-US', { weekday: 'long' });
      const todayMenu = menu[today];
      const menuList = document.getElementById("menu-list");
      const currentDay = document.getElementById("current-day");

      if (currentDay) {
        currentDay.textContent = `${today}'s Special Menu`;
      }

      if (todayMenu && menuList) {
        menuList.innerHTML = `
          <li><strong>üåÖ Breakfast:</strong> ${todayMenu.Breakfast}</li>
          <li><strong>üçΩÔ∏è Lunch:</strong> ${todayMenu.Lunch}</li>
          <li><strong>üåô Dinner:</strong> ${todayMenu.Dinner}</li>
        `;
      } else if (menuList) {
        menuList.innerHTML = "<li>No menu available today.</li>";
      }
    }

    // Initialize menu display
    displayTodaysMenu();

    // Cart functionality
    let cart = JSON.parse(localStorage.getItem('cart') || '[]');
    let selectedPayment = '';

    // Meal data with time-based availability
    const meals = {
      breakfast: {
        name: "Breakfast Special",
        items: "Poha + Chai + 4 Toast",
        price: 40,
        availableFrom: 7,
        availableTo: 11,
        emoji: "üåÖ"
      },
      lunch: {
        name: "Lunch Thali",
        items: "Mix veg pulao + dahi + salad",
        price: 50,
        availableFrom: 11,
        availableTo: 15,
        emoji: "üçΩÔ∏è"
      },
      dinner: {
        name: "Dinner Thali",
        items: "Rajma/Chhole + 4 Roti + Chawal + Raita",
        price: 50,
        availableFrom: 18,
        availableTo: 22,
        emoji: "üåô"
      },
      snacks: {
        name: "Evening Snacks",
        items: "Samosa + Chai + Biscuits",
        price: 30,
        availableFrom: 15,
        availableTo: 18,
        emoji: "‚òï"
      }
    };

    // Load meals based on current time
    function loadMeals() {
      const container = document.getElementById('mealsContainer');
      const currentHour = new Date().getHours();
      
      let mealsHTML = '';
      
      Object.keys(meals).forEach(mealType => {
        const meal = meals[mealType];
        const isAvailable = currentHour >= meal.availableFrom && currentHour < meal.availableTo;
        
        mealsHTML += `
          <div class="meal-card ${!isAvailable ? 'unavailable' : ''}">
            <div class="meal-header">
              <h3>${meal.emoji} ${meal.name}</h3>
              <div class="meal-time">
                ${meal.availableFrom}:00 - ${meal.availableTo}:00
              </div>
            </div>
            <p style="margin: 10px 0; opacity: 0.9;">${meal.items}</p>
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <div class="meal-price">‚Çπ${meal.price}</div>
              <button class="add-to-cart-btn" 
                      onclick="addToCart('${mealType}')" 
                      ${!isAvailable ? 'disabled' : ''}>
                ${!isAvailable ? '‚è∞ Not Available' : 'üõí Add to Cart'}
              </button>
            </div>
          </div>
        `;
      });
      
      container.innerHTML = mealsHTML;
    }

    // Add to cart function
    function addToCart(mealType) {
      const meal = meals[mealType];
      const existingItem = cart.find(item => item.type === mealType);
      
      if (existingItem) {
        existingItem.quantity += 1;
      } else {
        cart.push({
          type: mealType,
          name: meal.name,
          items: meal.items,
          price: meal.price,
          quantity: 1,
          emoji: meal.emoji
        });
      }
      
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCount();
      
      // Show success animation
      const button = event.target;
      const originalText = button.innerHTML;
      button.innerHTML = '‚úÖ Added!';
      button.style.background = '#00b894';
      
      setTimeout(() => {
        button.innerHTML = originalText;
        button.style.background = 'linear-gradient(135deg, #00b894, #00cec9)';
      }, 1000);
    }

    // Update cart count
    function updateCartCount() {
      const cartCount = document.getElementById('cartCount');
      const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
      
      if (totalItems > 0) {
        cartCount.textContent = totalItems;
        cartCount.style.display = 'flex';
      } else {
        cartCount.style.display = 'none';
      }
    }

    // Open cart modal
    function openCart() {
      document.getElementById('cartModal').style.display = 'block';
      displayCartItems();
    }

    // Close cart modal
    function closeCart() {
      document.getElementById('cartModal').style.display = 'none';
    }

    // Display cart items
    function displayCartItems() {
      const cartItems = document.getElementById('cartItems');
      const cartTotal = document.getElementById('cartTotal');
      const paymentSection = document.getElementById('paymentSection');
      
      if (cart.length === 0) {
        cartItems.innerHTML = `
          <div style="text-align: center; padding: 40px; color: white;">
            <h3 style="font-size: 1.8em; margin-bottom: 20px;">üõí Your cart is empty</h3>
            <p style="font-size: 1.2em; margin-bottom: 30px;">Add some delicious meals to get started!</p>
            <button onclick="closeCart(); document.getElementById('menu').scrollIntoView({behavior: 'smooth'})" 
                    style="background: linear-gradient(135deg, #feca57, #ff6b6b); color: white; padding: 15px 30px; border: none; border-radius: 25px; font-size: 1.1em; cursor: pointer; font-weight: 600;">
              üçΩÔ∏è Browse Meals
            </button>
          </div>
        `;
        cartTotal.style.display = 'none';
        paymentSection.style.display = 'none';
        return;
      }
      
      let itemsHTML = '';
      let subtotal = 0;
      
      cart.forEach((item, index) => {
        const itemTotal = item.price * item.quantity;
        subtotal += itemTotal;
        
        itemsHTML += `
          <div class="cart-item">
            <div>
              <h4 style="margin: 0 0 5px 0;">${item.emoji} ${item.name}</h4>
              <p style="margin: 0; opacity: 0.8; font-size: 0.9em;">${item.items}</p>
              <p style="margin: 5px 0 0 0; font-weight: bold;">‚Çπ${item.price} each</p>
            </div>
            <div class="quantity-controls">
              <button class="qty-btn" onclick="updateQuantity(${index}, -1)">-</button>
              <span style="font-weight: bold; font-size: 1.2em;">${item.quantity}</span>
              <button class="qty-btn" onclick="updateQuantity(${index}, 1)">+</button>
              <button onclick="removeFromCart(${index})" 
                      style="background: #ff6b6b; color: white; border: none; padding: 8px 12px; border-radius: 8px; cursor: pointer; margin-left: 10px;">
                üóëÔ∏è
              </button>
            </div>
          </div>
        `;
      });
      
      cartItems.innerHTML = itemsHTML;
      
      // Update totals
      document.getElementById('subtotal').textContent = `‚Çπ${subtotal}`;
      document.getElementById('totalAmount').textContent = `‚Çπ${subtotal}`;
      
      cartTotal.style.display = 'block';
      paymentSection.style.display = 'block';
    }

    // Update quantity
    function updateQuantity(index, change) {
      cart[index].quantity += change;
      
      if (cart[index].quantity <= 0) {
        cart.splice(index, 1);
      }
      
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCount();
      displayCartItems();
    }

    // Remove from cart
    function removeFromCart(index) {
      cart.splice(index, 1);
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCount();
      displayCartItems();
    }

    // Select payment method
    function selectPayment(method) {
      selectedPayment = method;
      
      // Remove selected class from all options
      document.querySelectorAll('.payment-option').forEach(option => {
        option.classList.remove('selected');
      });
      
      // Add selected class to chosen option
      if (method === 'online') {
        document.getElementById('onlinePayment').classList.add('selected');
        document.getElementById('checkoutBtn').innerHTML = 'üí≥ Pay Online & Order';
      } else {
        document.getElementById('codPayment').classList.add('selected');
        document.getElementById('checkoutBtn').innerHTML = 'üí∞ Order (Cash on Delivery)';
      }
    }

    // Process order
    function processOrder() {
      const customerName = document.getElementById('cartCustomerName').value.trim();
      const phone = document.getElementById('cartPhone').value.trim();
      const address = document.getElementById('cartAddress').value.trim();
      
      if (!customerName || !phone || !address) {
        alert('Please fill in all delivery information!');
        return;
      }
      
      if (!selectedPayment) {
        alert('Please select a payment method!');
        return;
      }
      
      if (cart.length === 0) {
        alert('Your cart is empty!');
        return;
      }
      
      // Calculate total
      const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
      
      // Create order data
      const orderData = {
        timestamp: new Date().toLocaleString('en-IN'),
        orderId: 'TIF' + Date.now(),
        customerName: customerName,
        phone: phone,
        email: '',
        address: address,
        items: cart.map(item => `${item.name} (${item.quantity}x)`).join(', '),
        totalAmount: subtotal,
        paymentMethod: selectedPayment === 'online' ? 'Online Payment' : 'Cash on Delivery',
        status: 'New Order',
        cartDetails: JSON.stringify(cart)
      };
      
      console.log('Sending cart order data:', orderData);
      
      // Show loading
      document.getElementById('checkoutBtn').innerHTML = '<span class="loading"></span> Processing...';
      
      // Send to Google Sheets (same as before)
      fetch(GOOGLE_SCRIPT_URL, {
        method: 'POST',
        headers: {
          'Content-Type': 'text/plain',
        },
        body: JSON.stringify(orderData)
      })
      .then(() => {
        // Save to order history
        saveOrderToHistory(orderData);
        
        // Handle payment
        if (selectedPayment === 'online') {
          // Redirect to UPI payment
          window.open(`upi://pay?pa=prateekshukla388@naviaxis&pn=Shuprama%20Kitchen&am=${subtotal}&cu=INR&tn=Order%20${orderData.orderId}`, '_blank');
        }
        
        // Clear cart
        cart = [];
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCartCount();
        
        // Show success
        alert(`üéâ Order placed successfully!\nOrder ID: ${orderData.orderId}\nTotal: ‚Çπ${subtotal}\nPayment: ${orderData.paymentMethod}\n\nWe'll contact you soon!`);
        
        closeCart();
        
      })
      .catch(error => {
        console.error('Error:', error);
        
        // Still process locally
        saveOrderToHistory(orderData);
        
        if (selectedPayment === 'online') {
          window.open(`upi://pay?pa=prateekshukla388@naviaxis&pn=Shuprama%20Kitchen&am=${subtotal}&cu=INR&tn=Order%20${orderData.orderId}`, '_blank');
        }
        
        cart = [];
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCartCount();
        
        alert(`üéâ Order received!\nOrder ID: ${orderData.orderId}\nTotal: ‚Çπ${subtotal}\nPayment: ${orderData.paymentMethod}\n\nWe'll contact you soon!`);
        
        closeCart();
      });
    }

    // Password and User Management Functions
    function togglePassword() {
      const passwordInput = document.getElementById('loginPassword');
      const checkbox = document.getElementById('showPassword');
      
      if (checkbox.checked) {
        passwordInput.type = 'text';
      } else {
        passwordInput.type = 'password';
      }
    }

    function forgotPassword() {
      const phone = prompt("üì± Enter your registered phone number:");
      
      if (!phone) return;
      
      const users = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
      const user = users.find(u => u.phone === phone);
      
      if (user) {
        alert(`üîë Password Recovery\n\nYour account details:\nüë§ Name: ${user.name}\nüì± Phone: ${user.phone}\nüîí Password: ${user.password}\nüìß Email: ${user.email}\n\n‚ö†Ô∏è Please save this information securely!`);
      } else {
        alert("‚ùå No account found with this phone number!\nPlease check the number or sign up for a new account.");
      }
    }



    function showUserData() {
      const currentUser = JSON.parse(localStorage.getItem('user') || '{}');
      
      if (!currentUser.name) {
        alert("‚ùå You are not logged in!\nPlease login first to view your profile.");
        return;
      }
      
      const orderHistory = JSON.parse(localStorage.getItem('orderHistory') || '[]');
      const cartData = JSON.parse(localStorage.getItem('cart') || '[]');
      
      let userData = `üë§ Your Profile:\n\n`;
      userData += `üìù Name: ${currentUser.name}\n`;
      userData += `üì± Phone: ${currentUser.phone}\n`;
      userData += `üìß Email: ${currentUser.email}\n`;
      userData += `üìç Address: ${currentUser.address}\n`;
      userData += `üïê Last Login: ${new Date(currentUser.loginTime).toLocaleString()}\n\n`;
      
      userData += `üìä Order Summary:\n`;
      userData += `üì¶ Total Orders: ${orderHistory.length}\n`;
      userData += `üõí Items in Cart: ${cartData.length}\n\n`;
      
      if (orderHistory.length > 0) {
        userData += `üçΩÔ∏è Recent Orders:\n`;
        orderHistory.slice(0, 3).forEach((order, index) => {
          userData += `${index + 1}. ${order.mealPlan || order.items} - ${new Date(order.timestamp).toLocaleDateString()}\n`;
        });
        userData += `\nüìã View complete order history from the menu.`;
      } else {
        userData += `üçΩÔ∏è No orders yet. Place your first order today!`;
      }
      
      alert(userData);
    }

    // Enhanced login with better error handling
    function handleLoginEnhanced() {
      const phone = document.getElementById('loginPhone').value.trim();
      const password = document.getElementById('loginPassword').value.trim();

      if (!phone || !password) {
        alert('Please fill in all fields!');
        return;
      }

      // Show loading
      document.getElementById('loginBtnText').style.display = 'none';
      document.getElementById('loginBtnLoading').style.display = 'inline';

      // Simulate login process
      setTimeout(() => {
        // Get stored users
        const users = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
        const user = users.find(u => u.phone === phone && u.password === password);

        if (user) {
          // Login successful
          localStorage.setItem('user', JSON.stringify({
            name: user.name,
            phone: user.phone,
            email: user.email,
            address: user.address,
            loginTime: new Date().toISOString()
          }));

          hideLoginModal();
          showUserInfo();
          populateUserData();
          
          alert(`üéâ Welcome back, ${user.name}!\n\n‚úÖ Login successful!\nüçõ You can now place orders\nüì± Your data has been loaded automatically\n\nüïê Login Time: ${new Date().toLocaleString()}`);
        } else {
          // Check if phone exists but wrong password
          const phoneExists = users.find(u => u.phone === phone);
          if (phoneExists) {
            alert(`‚ùå Incorrect password for ${phone}!\n\nüí° Tip: Click "Forgot Password?" to recover your password\nüëÅÔ∏è Or use "Show Password" checkbox to verify your input`);
          } else {
            alert(`‚ùå No account found with phone number: ${phone}\n\nüìù Please check the number or sign up for a new account\nüë• Click "View All Users" to see registered numbers`);
          }
        }

        // Reset button
        document.getElementById('loginBtnText').style.display = 'inline';
        document.getElementById('loginBtnLoading').style.display = 'none';
      }, 1500);
    }

    // Admin Panel Functions
    const ADMIN_CREDENTIALS = {
      userId: "PrateekShuprama890",
      password: "Pradhya677@"
    };

    function checkAdminAccess() {
      const currentUser = JSON.parse(localStorage.getItem('user') || '{}');
      
      // Check if current user is already an admin
      if (currentUser.isAdmin || currentUser.userId === ADMIN_CREDENTIALS.userId) {
        showAdminPanel();
        return;
      }
      
      // Check if user is logged in but not admin
      if (currentUser.name) {
        const adminUserId = prompt("üîê Admin Access Required\n\nYou are logged in as a regular user.\nEnter admin user ID to access admin panel:");
        if (!adminUserId) return;
        
        const adminPassword = prompt("üîë Enter admin password:");
        if (!adminPassword) return;
        
        // Check against main admin credentials
        if (adminUserId === ADMIN_CREDENTIALS.userId && adminPassword === ADMIN_CREDENTIALS.password) {
          // Update current user session to include admin privileges
          currentUser.isAdmin = true;
          currentUser.adminAccess = true;
          localStorage.setItem('user', JSON.stringify(currentUser));
          
          alert("‚úÖ Admin access granted!\nYou now have admin privileges for this session.");
          showAdminPanel();
          
          // Show admin panel link
          document.getElementById('adminPanelLink').style.display = 'block';
        } else {
          // Check against registered admin users
          const users = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
          const admin = users.find(u => u.userId === adminUserId && u.password === adminPassword && u.isAdmin);
          
          if (admin) {
            currentUser.isAdmin = true;
            currentUser.adminAccess = true;
            localStorage.setItem('user', JSON.stringify(currentUser));
            
            alert("‚úÖ Admin access granted!\nYou now have admin privileges for this session.");
            showAdminPanel();
            document.getElementById('adminPanelLink').style.display = 'block';
          } else {
            alert("‚ùå Invalid admin credentials!\nAccess denied.");
          }
        }
      } else {
        // User not logged in
        alert("üîê Please login first!\n\nYou need to be logged in to access the admin panel.\nClick the login button to continue.");
        showLoginModal();
      }
    }

    function showAdminPanel() {
      document.getElementById('adminModal').style.display = 'block';
      updateSystemStats();
    }

    function closeAdminPanel() {
      document.getElementById('adminModal').style.display = 'none';
    }

    function updateSystemStats() {
      const users = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
      const orders = JSON.parse(localStorage.getItem('orderHistory') || '[]');
      const currentUser = JSON.parse(localStorage.getItem('user') || '{}');
      const admins = users.filter(u => u.isAdmin);
      const totalRevenue = orders.reduce((sum, order) => sum + (parseInt(order.totalAmount) || 0), 0);
      
      const statsHTML = `
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
          <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; text-align: center;">
            <div style="font-size: 2em; margin-bottom: 5px;">üë•</div>
            <div style="font-size: 1.5em; font-weight: bold; color: #feca57;">${users.length}</div>
            <div style="font-size: 0.9em; opacity: 0.8;">Total Users</div>
          </div>
          <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; text-align: center;">
            <div style="font-size: 2em; margin-bottom: 5px;">üì¶</div>
            <div style="font-size: 1.5em; font-weight: bold; color: #feca57;">${orders.length}</div>
            <div style="font-size: 0.9em; opacity: 0.8;">Total Orders</div>
          </div>
          <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; text-align: center;">
            <div style="font-size: 2em; margin-bottom: 5px;">üëë</div>
            <div style="font-size: 1.5em; font-weight: bold; color: #feca57;">${admins.length}</div>
            <div style="font-size: 0.9em; opacity: 0.8;">Total Admins</div>
          </div>
          <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; text-align: center;">
            <div style="font-size: 2em; margin-bottom: 5px;">üí∞</div>
            <div style="font-size: 1.5em; font-weight: bold; color: #feca57;">‚Çπ${totalRevenue}</div>
            <div style="font-size: 0.9em; opacity: 0.8;">Total Revenue</div>
          </div>
          <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; text-align: center;">
            <div style="font-size: 2em; margin-bottom: 5px;">üíæ</div>
            <div style="font-size: 1.5em; font-weight: bold; color: #feca57;">${Math.round(JSON.stringify(localStorage).length / 1024)}</div>
            <div style="font-size: 0.9em; opacity: 0.8;">Data Size (KB)</div>
          </div>
          <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; text-align: center;">
            <div style="font-size: 2em; margin-bottom: 5px;">üë§</div>
            <div style="font-size: 1.2em; font-weight: bold; color: #feca57;">${currentUser.name || 'None'}</div>
            <div style="font-size: 0.9em; opacity: 0.8;">Current User</div>
          </div>
        </div>
        <div style="margin-top: 20px; text-align: center; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 10px;">
          <p style="margin: 0; font-size: 0.9em; opacity: 0.8;">üïê Last Updated: ${new Date().toLocaleString()}</p>
        </div>
      `;
      
      const statsElement = document.getElementById('systemStats');
      if (statsElement) {
        statsElement.innerHTML = statsHTML;
      }
    }

    function showAllUsersDetailed() {
      const users = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
      
      if (users.length === 0) {
        alert("üìù No registered users found!");
        return;
      }
      
      // Create modal content instead of new window
      const modalHTML = `
        <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 4000; display: flex; align-items: center; justify-content: center;" onclick="this.remove()">
          <div style="background: linear-gradient(135deg, #667eea, #764ba2); width: 90%; max-width: 1000px; max-height: 90%; overflow-y: auto; border-radius: 20px; padding: 30px; color: white; position: relative;" onclick="event.stopPropagation()">
            <span onclick="this.parentElement.parentElement.remove()" style="position: absolute; top: 15px; right: 25px; color: white; font-size: 30px; cursor: pointer; font-weight: bold;">&times;</span>
            <h2 style="text-align: center; margin-bottom: 30px; color: #feca57;">üë• User Database (${users.length} Users)</h2>
            <div style="display: grid; gap: 20px;">
              ${users.map((user, index) => `
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; border-left: 4px solid #feca57;">
                  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                    <div><strong>üë§ Name:</strong> ${user.name}</div>
                    <div><strong>üì± Phone:</strong> ${user.phone}</div>
                    <div><strong>üîí Password:</strong> ${user.password}</div>
                    <div><strong>üìß Email:</strong> ${user.email}</div>
                    <div><strong>üìç Address:</strong> ${user.address}</div>
                    <div><strong>üìÖ Joined:</strong> ${new Date(user.signupDate).toLocaleDateString()}</div>
                    <div><strong>üëë Role:</strong> ${user.isAdmin ? 'Admin' : 'Customer'}</div>
                    <div><strong>üïê Days:</strong> ${Math.floor((Date.now() - new Date(user.signupDate)) / (1000 * 60 * 60 * 24))}</div>
                  </div>
                </div>
              `).join('')}
            </div>
            <div style="text-align: center; margin-top: 30px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 15px;">
              <p><strong>üìä Total Users:</strong> ${users.length} | <strong>üíæ Data Size:</strong> ${Math.round(JSON.stringify(users).length / 1024)} KB</p>
              <button onclick="exportUserData()" style="background: #00b894; color: white; padding: 12px 25px; border: none; border-radius: 20px; cursor: pointer; margin: 10px; font-weight: 600;">üì• Export CSV</button>
              <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: #ff6b6b; color: white; padding: 12px 25px; border: none; border-radius: 20px; cursor: pointer; margin: 10px; font-weight: 600;">‚úñÔ∏è Close</button>
            </div>
          </div>
        </div>
      `;
      
      document.body.insertAdjacentHTML('beforeend', modalHTML);
    }

    function exportUserData() {
      const users = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
      
      if (users.length === 0) {
        alert("üìù No user data to export!");
        return;
      }
      
      const csvContent = "Name,Phone,Password,Email,Address,Signup Date\n" + 
        users.map(user => 
          `"${user.name}","${user.phone}","${user.password}","${user.email}","${user.address}","${new Date(user.signupDate).toLocaleString()}"`
        ).join('\n');
      
      const blob = new Blob([csvContent], { type: 'text/csv' });
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `shuprama-users-${new Date().toISOString().split('T')[0]}.csv`;
      a.click();
      window.URL.revokeObjectURL(url);
      
      alert(`üì• User data exported successfully!\n${users.length} users exported to CSV file.`);
    }

    function showAllOrders() {
      const orders = JSON.parse(localStorage.getItem('orderHistory') || '[]');
      
      if (orders.length === 0) {
        alert("üì¶ No orders found!");
        return;
      }
      
      // Create modal content with better organization
      const modalHTML = `
        <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 4000; display: flex; align-items: center; justify-content: center;" onclick="this.remove()">
          <div style="background: linear-gradient(135deg, #667eea, #764ba2); width: 95%; max-width: 1200px; max-height: 90%; overflow-y: auto; border-radius: 20px; padding: 30px; color: white; position: relative;" onclick="event.stopPropagation()">
            <span onclick="this.parentElement.parentElement.remove()" style="position: absolute; top: 15px; right: 25px; color: white; font-size: 30px; cursor: pointer; font-weight: bold;">&times;</span>
            <h2 style="text-align: center; margin-bottom: 30px; color: #feca57;">üì¶ Orders Database (${orders.length} Orders)</h2>
            <div style="display: grid; gap: 20px;">
              ${orders.map((order, index) => `
                <div style="background: rgba(255,255,255,0.1); padding: 25px; border-radius: 15px; border-left: 4px solid ${order.status === 'New Order' ? '#feca57' : '#00b894'};">
                  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; flex-wrap: wrap;">
                    <h3 style="color: #feca57; margin: 0; font-size: 1.3em;">Order #${order.orderId}</h3>
                    <span style="background: ${order.status === 'New Order' ? '#feca57' : '#00b894'}; color: white; padding: 5px 15px; border-radius: 20px; font-size: 0.9em; font-weight: 600;">
                      ${order.status}
                    </span>
                  </div>
                  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px;">
                    <div><strong>üë§ Customer:</strong> ${order.customerName}</div>
                    <div><strong>üì± Phone:</strong> ${order.phone}</div>
                    <div><strong>üìß Email:</strong> ${order.email || 'Not provided'}</div>
                    <div><strong>üìÖ Date:</strong> ${new Date(order.timestamp).toLocaleDateString()}</div>
                    <div><strong>üçΩÔ∏è Meal:</strong> ${order.mealPlan || order.items || 'N/A'}</div>
                    <div><strong>üí∞ Amount:</strong> ‚Çπ${order.totalAmount || 'N/A'}</div>
                    <div><strong>üí≥ Payment:</strong> ${order.paymentMethod || 'Not specified'}</div>
                    <div><strong>‚è∞ Duration:</strong> ${order.duration || 'Not specified'}</div>
                  </div>
                  <div style="margin-top: 15px;">
                    <div><strong>üìç Address:</strong> ${order.address}</div>
                    ${order.specialRequests && order.specialRequests !== 'None' ? `<div style="margin-top: 10px;"><strong>üìù Special Requests:</strong> ${order.specialRequests}</div>` : ''}
                  </div>
                </div>
              `).join('')}
            </div>
            <div style="text-align: center; margin-top: 30px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 15px;">
              <p><strong>üìä Total Orders:</strong> ${orders.length} | <strong>üí∞ Total Revenue:</strong> ‚Çπ${orders.reduce((sum, order) => sum + (parseInt(order.totalAmount) || 0), 0)} | <strong>üíæ Data Size:</strong> ${Math.round(JSON.stringify(orders).length / 1024)} KB</p>
              <button onclick="exportOrderData()" style="background: #00b894; color: white; padding: 12px 25px; border: none; border-radius: 20px; cursor: pointer; margin: 10px; font-weight: 600;">üì• Export CSV</button>
              <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: #ff6b6b; color: white; padding: 12px 25px; border: none; border-radius: 20px; cursor: pointer; margin: 10px; font-weight: 600;">‚úñÔ∏è Close</button>
            </div>
          </div>
        </div>
      `;
      
      document.body.insertAdjacentHTML('beforeend', modalHTML);
    }

    function exportOrderData() {
      const orders = JSON.parse(localStorage.getItem('orderHistory') || '[]');
      
      if (orders.length === 0) {
        alert("üì¶ No order data to export!");
        return;
      }
      
      const csvContent = "Order ID,Customer Name,Phone,Email,Address,Meal Plan,Amount,Payment Method,Order Date,Status\n" + 
        orders.map(order => 
          `"${order.orderId}","${order.customerName}","${order.phone}","${order.email || 'Not provided'}","${order.address}","${order.mealPlan}","${order.totalAmount || 'N/A'}","${order.paymentMethod || 'Not specified'}","${order.timestamp}","${order.status}"`
        ).join('\n');
      
      const blob = new Blob([csvContent], { type: 'text/csv' });
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `shuprama-orders-${new Date().toISOString().split('T')[0]}.csv`;
      a.click();
      window.URL.revokeObjectURL(url);
      
      alert(`üì• Order data exported successfully!\n${orders.length} orders exported to CSV file.`);
    }

    function createTestUser() {
      const testUser = {
        name: "Test User " + Math.floor(Math.random() * 1000),
        phone: "9876543" + Math.floor(Math.random() * 1000).toString().padStart(3, '0'),
        email: "test" + Math.floor(Math.random() * 1000) + "@example.com",
        password: "test123",
        address: "Test Address, Bareilly",
        signupDate: new Date().toISOString()
      };
      
      const users = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
      users.push(testUser);
      localStorage.setItem('registeredUsers', JSON.stringify(users));
      
      updateSystemStats();
      
      alert(`üë§ Test user created successfully!\n\nüì± Phone: ${testUser.phone}\nüîí Password: ${testUser.password}\nüë§ Name: ${testUser.name}\n\nYou can now login with these credentials!`);
    }

    function clearAllUsers() {
      if (confirm("‚ö†Ô∏è WARNING!\n\nThis will permanently delete ALL user accounts!\n\nAre you sure you want to continue?")) {
        if (confirm("üö® FINAL CONFIRMATION!\n\nThis action cannot be undone!\nAll user data will be lost forever!\n\nClick OK to proceed with deletion.")) {
          localStorage.removeItem('registeredUsers');
          localStorage.removeItem('user'); // Also logout current user
          
          updateSystemStats();
          
          alert("üóëÔ∏è All user data has been cleared!\n\nThe system has been reset to initial state.\nYou will need to sign up again to use the service.");
          
          // Force logout and show login modal
          document.getElementById('userInfo').style.display = 'none';
          showLoginModal();
          closeAdminPanel();
        }
      }
    }

    function clearAllOrders() {
      if (confirm("‚ö†Ô∏è WARNING!\n\nThis will permanently delete ALL order history!\n\nAre you sure you want to continue?")) {
        localStorage.removeItem('orderHistory');
        updateSystemStats();
        alert("üóëÔ∏è All order history has been cleared!");
      }
    }

    function resetSystem() {
      if (confirm("üö® SYSTEM RESET WARNING!\n\nThis will delete ALL data:\n‚Ä¢ All user accounts\n‚Ä¢ All order history\n‚Ä¢ All cart data\n‚Ä¢ All settings\n\nThis action cannot be undone!\n\nAre you sure?")) {
        if (confirm("üî• FINAL WARNING!\n\nYou are about to completely reset the system!\n\nClick OK to proceed with FULL SYSTEM RESET.")) {
          // Clear all localStorage data
          localStorage.clear();
          
          alert("üîÑ System has been completely reset!\n\nAll data has been cleared.\nThe page will reload to initial state.");
          
          // Reload the page
          window.location.reload();
        }
      }
    }

    function backupData() {
      const allData = {
        users: JSON.parse(localStorage.getItem('registeredUsers') || '[]'),
        orders: JSON.parse(localStorage.getItem('orderHistory') || '[]'),
        currentUser: JSON.parse(localStorage.getItem('user') || '{}'),
        cart: JSON.parse(localStorage.getItem('cart') || '[]'),
        backupDate: new Date().toISOString(),
        version: "1.0"
      };
      
      const dataStr = JSON.stringify(allData, null, 2);
      const blob = new Blob([dataStr], { type: 'application/json' });
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `shuprama-backup-${new Date().toISOString().split('T')[0]}.json`;
      a.click();
      window.URL.revokeObjectURL(url);
      
      alert(`üíæ System backup created successfully!\n\nBackup includes:\n‚Ä¢ ${allData.users.length} users\n‚Ä¢ ${allData.orders.length} orders\n‚Ä¢ Current session data\n‚Ä¢ Cart data\n\nFile saved as JSON format.`);
    }

    // Admin Management Functions
    function addNewAdmin() {
      const name = prompt("üë§ Enter admin name:");
      if (!name) return;
      
      const userId = prompt("üÜî Enter admin user ID:");
      if (!userId) return;
      
      const phone = prompt("üì± Enter admin phone number:");
      if (!phone) return;
      
      const email = prompt("üìß Enter admin email:");
      if (!email) return;
      
      const password = prompt("üîí Enter admin password:");
      if (!password) return;
      
      const users = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
      
      // Check if user ID or phone already exists
      if (users.find(u => u.userId === userId || u.phone === phone)) {
        alert("‚ùå User ID or phone number already exists!");
        return;
      }
      
      const newAdmin = {
        name: name,
        userId: userId,
        phone: phone,
        email: email,
        password: password,
        address: "Admin Address",
        signupDate: new Date().toISOString(),
        role: "admin",
        isAdmin: true
      };
      
      users.push(newAdmin);
      localStorage.setItem('registeredUsers', JSON.stringify(users));
      
      updateSystemStats();
      
      alert(`‚úÖ New admin added successfully!\n\nüë§ Name: ${name}\nüÜî User ID: ${userId}\nüì± Phone: ${phone}\nüîí Password: ${password}\n\nAdmin can now access the admin panel!`);
    }

    function removeAdmin() {
      const users = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
      const admins = users.filter(u => u.isAdmin);
      
      if (admins.length <= 1) {
        alert("‚ùå Cannot remove admin!\nAt least one admin must remain in the system.");
        return;
      }
      
      let adminList = "üëë Current Admins:\n\n";
      admins.forEach((admin, index) => {
        adminList += `${index + 1}. ${admin.name} (${admin.userId})\n`;
      });
      
      const userIdToRemove = prompt(adminList + "\nüóëÔ∏è Enter the User ID of admin to remove:");
      if (!userIdToRemove) return;
      
      if (userIdToRemove === ADMIN_CREDENTIALS.userId) {
        alert("‚ùå Cannot remove the main admin account!");
        return;
      }
      
      const adminIndex = users.findIndex(u => u.userId === userIdToRemove && u.isAdmin);
      
      if (adminIndex === -1) {
        alert("‚ùå Admin not found with this User ID!");
        return;
      }
      
      if (confirm(`‚ö†Ô∏è Are you sure you want to remove admin:\n\nüë§ ${users[adminIndex].name}\nüÜî ${users[adminIndex].userId}\n\nThis action cannot be undone!`)) {
        const removedAdmin = users[adminIndex];
        users.splice(adminIndex, 1);
        localStorage.setItem('registeredUsers', JSON.stringify(users));
        
        updateSystemStats();
        
        alert(`‚úÖ Admin removed successfully!\n\nüë§ ${removedAdmin.name} (${removedAdmin.userId}) is no longer an admin.`);
      }
    }

    function changeAdminPassword() {
      const userIdToChange = prompt("üÜî Enter admin User ID to change password:");
      if (!userIdToChange) return;
      
      const users = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
      const adminIndex = users.findIndex(u => u.userId === userIdToChange && u.isAdmin);
      
      if (adminIndex === -1) {
        alert("‚ùå Admin not found with this User ID!");
        return;
      }
      
      const currentPassword = prompt("üîí Enter current password:");
      if (!currentPassword) return;
      
      if (users[adminIndex].password !== currentPassword) {
        alert("‚ùå Current password is incorrect!");
        return;
      }
      
      const newPassword = prompt("üîë Enter new password:");
      if (!newPassword) return;
      
      const confirmPassword = prompt("üîë Confirm new password:");
      if (newPassword !== confirmPassword) {
        alert("‚ùå Passwords do not match!");
        return;
      }
      
      users[adminIndex].password = newPassword;
      localStorage.setItem('registeredUsers', JSON.stringify(users));
      
      // Update main admin credentials if it's the main admin
      if (userIdToChange === ADMIN_CREDENTIALS.userId) {
        // Note: This only updates the stored user, not the constant
        alert(`‚úÖ Password changed successfully!\n\nüë§ Admin: ${users[adminIndex].name}\nüÜî User ID: ${userIdToChange}\nüîë New Password: ${newPassword}\n\n‚ö†Ô∏è Please remember the new password!`);
      } else {
        alert(`‚úÖ Password changed successfully!\n\nüë§ Admin: ${users[adminIndex].name}\nüîë New Password: ${newPassword}`);
      }
    }

    function viewAllAdmins() {
      const users = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
      const admins = users.filter(u => u.isAdmin);
      
      if (admins.length === 0) {
        alert("üëë No admins found in the system!");
        return;
      }
      
      // Create modal content for admin display
      const modalHTML = `
        <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 4000; display: flex; align-items: center; justify-content: center;" onclick="this.remove()">
          <div style="background: linear-gradient(135deg, #667eea, #764ba2); width: 90%; max-width: 1000px; max-height: 90%; overflow-y: auto; border-radius: 20px; padding: 30px; color: white; position: relative;" onclick="event.stopPropagation()">
            <span onclick="this.parentElement.parentElement.remove()" style="position: absolute; top: 15px; right: 25px; color: white; font-size: 30px; cursor: pointer; font-weight: bold;">&times;</span>
            <h2 style="text-align: center; margin-bottom: 30px; color: #feca57;">üëë Admin Database (${admins.length} Admins)</h2>
            <div style="display: grid; gap: 20px;">
              ${admins.map((admin, index) => `
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; border-left: 4px solid #ff6b6b;">
                  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                    <div><strong>üë§ Name:</strong> ${admin.name}</div>
                    <div><strong>üÜî User ID:</strong> ${admin.userId}</div>
                    <div><strong>üì± Phone:</strong> ${admin.phone}</div>
                    <div><strong>üîí Password:</strong> ${admin.password}</div>
                    <div><strong>üìß Email:</strong> ${admin.email}</div>
                    <div><strong>üìÖ Added:</strong> ${new Date(admin.signupDate).toLocaleDateString()}</div>
                    <div><strong>üè∑Ô∏è Role:</strong> ${admin.role || 'Admin'}</div>
                    <div><strong>üïê Days:</strong> ${Math.floor((Date.now() - new Date(admin.signupDate)) / (1000 * 60 * 60 * 24))}</div>
                  </div>
                  <div style="margin-top: 15px; text-align: right;">
                    ${admin.userId !== ADMIN_CREDENTIALS.userId ? `
                      <button onclick="removeSpecificAdmin('${admin.userId}')" style="background: #ff6b6b; color: white; padding: 8px 15px; border: none; border-radius: 15px; cursor: pointer; margin-left: 10px; font-weight: 600;">
                        üóëÔ∏è Remove
                      </button>
                    ` : `
                      <span style="background: #00b894; color: white; padding: 8px 15px; border-radius: 15px; font-size: 0.9em; font-weight: 600;">
                        üîí Main Admin
                      </span>
                    `}
                  </div>
                </div>
              `).join('')}
            </div>
            <div style="text-align: center; margin-top: 30px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 15px;">
              <p><strong>üëë Total Admins:</strong> ${admins.length} | <strong>üîí Main Admin:</strong> ${ADMIN_CREDENTIALS.userId}</p>
              <button onclick="addNewAdmin()" style="background: #00b894; color: white; padding: 12px 25px; border: none; border-radius: 20px; cursor: pointer; margin: 10px; font-weight: 600;">‚ûï Add Admin</button>
              <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: #ff6b6b; color: white; padding: 12px 25px; border: none; border-radius: 20px; cursor: pointer; margin: 10px; font-weight: 600;">‚úñÔ∏è Close</button>
            </div>
          </div>
        </div>
      `;
      
      document.body.insertAdjacentHTML('beforeend', modalHTML);
    }

    // Helper function to remove specific admin
    function removeSpecificAdmin(userId) {
      if (confirm(`‚ö†Ô∏è Are you sure you want to remove admin with User ID: ${userId}?\n\nThis action cannot be undone!`)) {
        const users = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
        const adminIndex = users.findIndex(u => u.userId === userId && u.isAdmin);
        
        if (adminIndex !== -1) {
          const removedAdmin = users[adminIndex];
          users.splice(adminIndex, 1);
          localStorage.setItem('registeredUsers', JSON.stringify(users));
          
          alert(`‚úÖ Admin removed successfully!\n\nüë§ ${removedAdmin.name} (${removedAdmin.userId}) is no longer an admin.`);
          
          // Close current modal and refresh admin panel
          document.querySelector('[style*="z-index: 4000"]').remove();
          updateSystemStats();
        }
      }
    }

    // Admin Quick Login Function
    function adminQuickLogin() {
      // Auto-fill admin credentials
      document.getElementById('loginPhone').value = '9149153015';
      document.getElementById('loginPassword').value = 'Pradhya677@';
      
      // Show login modal
      showLoginModal();
      
      // Show success message
      setTimeout(() => {
        alert('üëë Admin credentials filled!\n\nClick "Login & Start Ordering" to access admin panel.\n\nüîê User ID: PrateekShuprama890\nüîë Password: Pradhya677@');
      }, 500);
    }

    // Initialize cart and meals
    updateCartCount();
    loadMeals();
    
    // Refresh meals every minute to update availability
    setInterval(loadMeals, 60000);

    // Order History Functions
    function showOrderHistory() {
      const modal = document.getElementById('orderHistoryModal');
      const content = document.getElementById('orderHistoryContent');
      
      modal.style.display = 'block';
      
      // Get order history from localStorage
      const orderHistory = JSON.parse(localStorage.getItem('orderHistory') || '[]');
      
      if (orderHistory.length === 0) {
        content.innerHTML = `
          <div style="text-align: center; color: white; padding: 40px;">
            <h3 style="font-size: 1.8em; margin-bottom: 20px;">üìù No Orders Yet</h3>
            <p style="font-size: 1.2em; margin-bottom: 30px;">You haven't placed any orders yet.</p>
            <button onclick="closeOrderHistory(); document.getElementById('order').scrollIntoView({behavior: 'smooth'})" 
                    style="background: linear-gradient(135deg, #feca57, #ff6b6b); color: white; padding: 15px 30px; border: none; border-radius: 25px; font-size: 1.1em; cursor: pointer; font-weight: 600;">
              üçõ Place Your First Order
            </button>
          </div>
        `;
        return;
      }
      
      let historyHTML = '';
      orderHistory.forEach((order, index) => {
        const statusColor = order.status === 'New Order' ? '#feca57' : 
                           order.status === 'Confirmed' ? '#00b894' : 
                           order.status === 'Delivered' ? '#74b9ff' : '#fd79a8';
        
        historyHTML += `
          <div style="background: rgba(255,255,255,0.1); margin: 20px 0; padding: 25px; border-radius: 15px; border-left: 5px solid ${statusColor};">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; flex-wrap: wrap;">
              <h3 style="color: #feca57; font-size: 1.3em; margin: 0;">Order #${order.orderId}</h3>
              <span style="background: ${statusColor}; color: white; padding: 5px 15px; border-radius: 20px; font-size: 0.9em; font-weight: 600;">
                ${order.status}
              </span>
            </div>
            
            <div style="color: white; line-height: 1.8;">
              <p><strong>üìÖ Date:</strong> ${order.timestamp}</p>
              <p><strong>üçΩÔ∏è Meal:</strong> ${order.mealPlan}</p>
              <p><strong>üìç Address:</strong> ${order.address}</p>
              <p><strong>üì± Phone:</strong> ${order.phone}</p>
              ${order.duration !== 'Not specified' ? `<p><strong>‚è∞ Duration:</strong> ${order.duration}</p>` : ''}
              ${order.deliveryTime !== 'Not specified' ? `<p><strong>üïê Time:</strong> ${order.deliveryTime}</p>` : ''}
              ${order.specialRequests !== 'None' ? `<p><strong>üìù Special Requests:</strong> ${order.specialRequests}</p>` : ''}
            </div>
            
            <div style="margin-top: 15px; text-align: right;">
              <button onclick="reorderItem('${order.orderId}')" 
                      style="background: linear-gradient(135deg, #00b894, #00cec9); color: white; padding: 8px 20px; border: none; border-radius: 20px; cursor: pointer; font-weight: 600; margin-left: 10px;">
                üîÑ Reorder
              </button>
            </div>
          </div>
        `;
      });
      
      content.innerHTML = historyHTML;
    }

    function closeOrderHistory() {
      document.getElementById('orderHistoryModal').style.display = 'none';
    }

    function reorderItem(orderId) {
      const orderHistory = JSON.parse(localStorage.getItem('orderHistory') || '[]');
      const order = orderHistory.find(o => o.orderId === orderId);
      
      if (order) {
        // Fill form with previous order data
        document.getElementById('customerName').value = order.customerName;
        document.getElementById('phone').value = order.phone;
        document.getElementById('email').value = order.email !== 'Not provided' ? order.email : '';
        document.getElementById('address').value = order.address;
        document.getElementById('mealPlan').value = order.mealPlan;
        document.getElementById('duration').value = order.duration !== 'Not specified' ? order.duration : '';
        document.getElementById('deliveryTime').value = order.deliveryTime !== 'Not specified' ? order.deliveryTime : '';
        document.getElementById('specialRequests').value = order.specialRequests !== 'None' ? order.specialRequests : '';
        
        // Close modal and scroll to form
        closeOrderHistory();
        document.getElementById('order').scrollIntoView({ behavior: 'smooth' });
        
        // Show notification
        alert('üçõ Previous order details filled! Please review and submit.');
      }
    }

    // Close modal when clicking outside
    window.onclick = function(event) {
      const modal = document.getElementById('orderHistoryModal');
      if (event.target === modal) {
        closeOrderHistory();
      }
    }


  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'967c664f5505a786',t:'MTc1Mzk1NzYwOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
